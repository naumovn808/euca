{"version":3,"file":"setupModals.js","mappings":"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","sources":["webpack:///./modals/modals.js"],"sourcesContent":["export function setupModals() {\n\tconst modalButtons = document.querySelectorAll('[data-modal-target]');\n\tconst modals = document.querySelectorAll('[data-modal]');\n\tlet activeModal = null;\n\n\tmodalButtons.forEach(button => {\n\t\tbutton.addEventListener('click', () => {\n\t\t\tconst targetModalId = button.dataset.modalTarget;\n\t\t\tconst targetModal = document.querySelector(`[data-modal=\"${targetModalId}\"]`);\n\n\t\t\tif (targetModal) {\n\t\t\t\tmodals.forEach(modal => {\n\t\t\t\t\tif (modal !== targetModal && modal.classList.contains('open')) {\n\t\t\t\t\t\tmodal.classList.remove('open');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (activeModal && activeModal !== targetModal) {\n\t\t\t\t\tactiveModal.classList.remove('open');\n\t\t\t\t}\n\t\t\t\ttargetModal.classList.toggle('open');\n\n\t\t\t\tactiveModal = targetModal.classList.contains('open') ? targetModal : null;\n\n\t\t\t\tif (activeModal && targetModalId !== 'dropdown') {\n\t\t\t\t\tdocument.body.classList.add('modal-open');\n\t\t\t\t} else {\n\t\t\t\t\tdocument.body.classList.remove('modal-open');\n\t\t\t\t}\n\n\t\t\t\tif (activeModal) {\n\t\t\t\t\tif (activeModal.classList.contains('modal-overlay')) {\n\t\t\t\t\t\tactiveModal.addEventListener('mousedown', overlayClickHandler);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.addEventListener('mousedown', outsideClickHandler);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.error(`Модальное окно с id \"${targetModalId}\" не найдено.`);\n\t\t\t}\n\t\t});\n\t});\n\n\tconst closeButtons = document.querySelectorAll('[data-modal-close]');\n\n\tcloseButtons.forEach(closeButton => {\n\t\tcloseButton.addEventListener('click', () => {\n\t\t\tconst targetModalId = closeButton.dataset.modalClose;\n\t\t\tconst targetModal = document.querySelector(`[data-modal=\"${targetModalId}\"]`);\n\n\t\t\tif (targetModal) {\n\t\t\t\ttargetModal.classList.remove('open');\n\t\t\t\tdocument.body.classList.remove('modal-open');\n\t\t\t\tactiveModal = null;\n\t\t\t\tremoveListeners();\n\t\t\t} else {\n\t\t\t\tconsole.error(`Модальное окно с id \"${targetModalId}\" не найдено.`);\n\t\t\t}\n\t\t});\n\t});\n\n\tdocument.addEventListener('keydown', (event) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tif (activeModal) {\n\t\t\t\tactiveModal.classList.remove('open');\n\t\t\t\tdocument.body.classList.remove('modal-open');\n\t\t\t\tactiveModal = null;\n\t\t\t\tremoveListeners();\n\t\t\t}\n\t\t} else if (event.key === 'Tab') {\n\t\t\tconst activeModal = document.querySelector('.modal-overlay.open, [data-modal].open');\n\n\t\t\tif (activeModal) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tconst focusableElements = activeModal.querySelectorAll(\n\t\t\t\t\t'button, a[href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n\t\t\t\t);\n\n\t\t\t\tlet focusedElementIndex = Array.from(focusableElements).indexOf(document.activeElement);\n\n\t\t\t\tlet nextFocusableElement;\n\t\t\t\tif (event.shiftKey) {\n\t\t\t\t\tnextFocusableElement = focusableElements[(focusedElementIndex - 1 + focusableElements.length) % focusableElements.length];\n\t\t\t\t} else {\n\t\t\t\t\tnextFocusableElement = focusableElements[(focusedElementIndex + 1) % focusableElements.length];\n\t\t\t\t}\n\n\t\t\t\tif (nextFocusableElement) {\n\t\t\t\t\tnextFocusableElement.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction outsideClickHandler(event) {\n\t\tif (activeModal && !activeModal.contains(event.target)) {\n\t\t\tactiveModal.classList.remove('open');\n\t\t\tdocument.body.classList.remove('modal-open');\n\t\t\tactiveModal = null;\n\t\t\tremoveListeners();\n\t\t}\n\t}\n\n\tfunction overlayClickHandler(event) {\n\t\tif (event.target === activeModal) {\n\t\t\tactiveModal.classList.remove('open');\n\t\t\tdocument.body.classList.remove('modal-open');\n\t\t\tactiveModal = null;\n\t\t\tremoveListeners();\n\t\t}\n\t}\n\n\tfunction removeListeners() {\n\t\tdocument.removeEventListener('mousedown', outsideClickHandler);\n\t\tif (activeModal) {\n\t\t\tactiveModal.removeEventListener('mousedown', overlayClickHandler);\n\t\t}\n\t}\n}\n"],"names":["activeModal"],"sourceRoot":""}